import { Stack, useRouter } from 'expo-router';
import React from 'react';
import { View, Text, TouchableOpacity } from 'react-native';
import { GlobalStyle } from '../styles/GlobalStyles';
import { useSegments } from 'expo-router';

export default function Layout() {
  const segments = useSegments();
  const router = useRouter();

  // Esconder nav bar apenas na tela de criaÃ§Ã£o
  const showNavBar = !segments.includes('create');

  return (
    <View style={{ flex: 1 }}>
      <Stack
        screenOptions={{
          headerShown: false,
          animation: 'fade',
        }}
      >
        <Stack.Screen name="index" />
        <Stack.Screen name="create" />
        <Stack.Screen name="attributes" />
        <Stack.Screen name="rewards" />
      </Stack>

      {/* Barra de navegaÃ§Ã£o inferior */}
      {showNavBar && (
        <View style={GlobalStyle.navContainer}>
          <TouchableOpacity 
            style={GlobalStyle.navButton}
            onPress={() => router.push('/')}
          >
            <Text style={[
              GlobalStyle.navText,
              segments[0] === 'index' && { color: '#FF4655' }
            ]}>
              ðŸŒŒ Quests
            </Text>
          </TouchableOpacity>

          <TouchableOpacity 
            style={GlobalStyle.navButton}
            onPress={() => router.push('/attributes')}
          >
            <Text style={[
              GlobalStyle.navText,
              segments[0] === 'attributes' && { color: '#FF4655' }
            ]}>
              ðŸ“Š Attributes
            </Text>
          </TouchableOpacity>

          <TouchableOpacity 
            style={GlobalStyle.navButton}
            onPress={() => router.push('/rewards')}
          >
            <Text style={[
              GlobalStyle.navText,
              segments[0] === 'rewards' && { color: '#FF4655' }
            ]}>
              ðŸ’Ž Rewards
            </Text>
          </TouchableOpacity>
        </View>
      )}
    </View>
  );
}